<?xml version="1.0" encoding="utf-8"?>
<map proto="1.3.3">
	<name>Tet Land</name>
	<version>0.2.0</version>
	<objective>Shoot other team's player!</objective>
	<authors>
		<author>EEE</author>
	</authors>
	<paintball>
		<lives>80</lives>
	</paintball>
	<teams>
		<team color="light_purple" max="16">Purple Team</team>
		<team color="green" max="16">Green Team</team>
	</teams>
	<kits>
		<kit name="purple">
			<chestplate color="800080" locked="true">leather chestplate</chestplate>
		</kit>
		<kit name="green">
			<chestplate color="008000" locked="true">leather chestplate</chestplate>
		</kit>
	</kits>
	<spawns>
		<spawn team="purple" yaw="90" kit="purple">
			<cuboid min="-46.5,30,-18.5 " max="-45.5,30,-17.5"/>
		</spawn>
		<spawn team="green" yaw="-90" kit="green">
			<cuboid min="-52.5,30,-18.5 " max="-51.5,30,-17.5"/>
		</spawn>
		<default yaw="-90">
			<cuboid min="0,31,0" max="0,31,0"/>
		</default>
		<default yaw="0">
			<cuboid min="-50.5,37,-19.5" max="-47.5,37,-16.5"/>
		</default>
	</spawns>
	<maxbuildheight>0</maxbuildheight>
	<autorespawn time="20s"/>
	<shops>
		<shop name="Killstreak Shop">
			<item price="gold nugget,3" damage="8227" potions="speed:36000:0:true" name="speed potion" slot="2" bind="true">potion</item>
			<item price="gold nugget,6" damage="8227" potions="speed:36000:1:true" name="speed potion2" slot="4" bind="true">potion</item>
			<item price="gold nugget,20" slot="6" bind="true">exp bottle</item>
		</shop>
	</shops>
	<itemremove>
		<item>leather_chestplate</item>
		<item>snow_ball</item>
	</itemremove>
	<include src="tutorial.xml" />
	<filters>
		<filter name="only-purple">
			<team>purple</team>
		</filter>
		<filter name="only-green">
			<team>green</team>
		</filter>
		<filter name="enchant-purple">
			<all>
				<team>purple</team>
				<carrying><item>exp bottle</item></carrying>
			</all>
		</filter>
		<filter name="enchantrod-green">
			<all>
				<team>green</team>
				<carrying><item>exp bottle</item></carrying>
			</all>
		</filter>
		
	</filters>
	<regions>
		<cuboid name="mid-purple1" min="-50,1,-17" max="-48,20,-16" />
		<cuboid name="mid-purple2" min="-51,1,-18" max="-47,20,-17" />
		<cuboid name="mid-green1" min="-50,1,-20" max="-48,20,-19" />
		<cuboid name="mid-green2" min="-51,1,-19" max="-47,20,-18" />

		<union name="mid-purple">
			<region name="mid-purple1" />
			<region name="mid-purple2" />
		</union>
		<union name="mid-green">
			<region name="mid-green1" />
			<region name="mid-green2" />
		</union>

		<apply enter="only-purple" message="敵軍ワープゾーンには入れません/You may not enter the enemy team's warp zone">
			<region name="mid-purple" />
		</apply>
		<apply enter="only-green" message="敵軍ワープゾーンには入れません/You may not enter the enemy team's warp zone">
			<region name="mid-green" />
		</apply>
	</regions>

	<portals>
		<!-- purple portal -->

		<!-- X -->
		<portal x="@27" y="@28" z="@13" yaw="135">
			<cuboid min="-46,29,-13" max="-44,33,-13"/>
		</portal>
		<!-- Y -->
		<portal x="@27" y="@11" z="@-49" yaw="-135">
			<cuboid min="-46,29,-22" max="-44,33,-22"/>
		</portal>
		<!-- DiaUp -->
		<portal x="@7" y="@6" z="@12" yaw="@90">
			<cuboid min="3,15,-30" max="3,17,-28"/>
		</portal>
		<!-- DiaDown -->
		<portal x="@5" y="@16" z="@-29" yaw="@-90">
			<cuboid min="6,5,14" max="8,7,14"/>
		</portal>

		<!-- green portal -->
		<!-- X -->
		<portal x="@-125" y="@28" z="@-49" yaw="@135">
			<cuboid min="-53,29,-22" max="-51,33,-22"/>
		</portal>
		<!-- Y -->
		<portal x="@-125" y="@11" z="@13" yaw="@-45">
			<cuboid min="-53,29,-13" max="-51,33,-13"/>
		</portal>
		<!-- DiaUp -->
		<portal x="@-105" y="@6" z="@-48" yaw="@90">
			<cuboid min="-101,15,-7" max="-101,17,-5"/>
		</portal>
		<!-- DiaDown -->
		<portal x="@-103" y="@16" z="@-6" yaw="@-90">
			5<cuboid min="-106,5,-50" max="-104,7,-50"/>
		</portal>

		<!-- Mid -->
		<!-- to purple -->
		<portal x="@-46" y="@30" z="@-18">
			<cuboid min="-50.5,4,-17.5" max="-47.5,4,-16.5"/>
		</portal>
		<!-- to green -->
		<portal x="@-52" y="@30" z="@-18">
			<cuboid min="-50.5,4,-19.5" max="-47.5,4,-18.5"/>
		</portal>
		
	</portals>

	<script>
		<![CDATA[
			match.getWorld().on('use', function(event) {
				if ((event.getItemStack().getType() == 'EXP_BOTTLE')
					&&((event.getPlayer().getTeam().getName()=="Purple Team")
					||(event.getPlayer().getTeam().getName()=="Green Team"))){
					match.broadcast(event.getPlayer().getName() + " summon enemies to lava!!");
					
					var players=match.getPlayers();
					for(var i = 0; i < players.length; i++){
						if(players[i].getTeam().getName()!=event.getPlayer().getTeam().getName()){
							players[i].teleport(-49,24,-17);
						};
					};
				}
			});
		]]>
	</script>

	<tutorial>
		<stage title="Paint Ball (PB)">
			<message>
				<line>このマップは、PBマップです。</line>
				<line>敵チームにより多くの雪球を当てることが目標です。</line>
			</message>
		</stage>
	</tutorial>
</map>
